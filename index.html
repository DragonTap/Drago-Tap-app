<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drago Tap</title>
    <script src="https://cdn.ton.dev/ton-connect-web.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            font-family: Arial, sans-serif;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        /* Страница с локальным фото и текстом */
        #completed-screen {
            width: 100%;
            height: 100%;
            background-color: black;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }

        #dragon-image {
            width: 60%;
            max-width: 400px;
            margin-bottom: 20px;
            pointer-events: none;
        }

        #completed-text {
            font-size: 2rem;
            color: yellow;
            margin-bottom: 10px;
        }

        #ton-address {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 20px;
        }

        #copy-btn, #go-to-tonspace-btn {
            padding: 10px 20px;
            font-size: 1.2rem;
            background-color: #ff0000;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            text-align: center;
            box-shadow: 0 0 10px #ff0000;
            margin-top: 10px;
        }

        #copy-btn:hover, #go-to-tonspace-btn:hover {
            background-color: #cc0000;
        }

        /* Адаптивные стили для мобильных устройств */
        @media (max-width: 1200px) {
            #completed-text {
                font-size: 1.8rem;
            }

            #dragon-image {
                width: 50%;
                max-width: 350px;
            }

            #copy-btn, #go-to-tonspace-btn {
                font-size: 1.1rem;
                padding: 8px 15px;
            }
        }

        @media (max-width: 768px) {
            #completed-text {
                font-size: 1.6rem;
            }

            #dragon-image {
                width: 60%;
                max-width: 300px;
            }

            #copy-btn, #go-to-tonspace-btn {
                font-size: 1rem;
                padding: 8px 14px;
            }
        }

        @media (max-width: 480px) {
            #completed-text {
                font-size: 1.4rem;
            }

            #dragon-image {
                width: 70%;
                max-width: 250px;
            }

            #copy-btn, #go-to-tonspace-btn {
                font-size: 1rem;
                padding: 7px 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Экран с локальным фото и кнопками -->
    <div id="completed-screen">
        <img id="dragon-image" src="grustno.png" alt="Sad Image">
        <p id="completed-text">Вы можете помочь финансово</p>
        <p id="ton-address">Наш Ton-адрес: UQCQD46_F_nffuYLdvdUY1-YCKoncASqe-T9xpmwjwgkJFVs</p>
        <button id="copy-btn">Копировать адрес</button>
        <button id="go-to-tonspace-btn">Перейти в TonSpace</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const copyBtn = document.getElementById('copy-btn');
            const tonAddress = 'UQCQD46_F_nffuYLdvdUY1-YCKoncASqe-T9xpmwjwgkJFVs';
            const goToTonSpaceBtn = document.getElementById('go-to-tonspace-btn');

            // Функция для копирования адреса в буфер обмена
            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(tonAddress).then(() => {
                    alert('Адрес скопирован в буфер обмена!');
                }).catch(err => {
                    console.error('Ошибка при копировании: ', err);
                    alert('Не удалось скопировать адрес. Попробуйте снова.');
                });
            });

            // Переход в TonSpace
            goToTonSpaceBtn.addEventListener('click', () => {
                window.open('https://t.me/wallet', '_blank');
            });

            // Инициализация TON Connect
            const tonConnect = new TonConnect({
                manifestUrl: 'https://ton.dev/manifest.json', // Укажите URL манифеста для вашего приложения
                bridgeUrl: 'https://ton-connect-protocol.ton.dev' // Укажите мост для подключения кошельков
            });

            // Функция для открытия TON Space и отправки транзакции
            goToTonSpaceBtn.addEventListener('click', async () => {
                try {
                    // Открываем TON Space для подключения кошелька
                    const wallet = await tonConnect.connect();

                    // Адрес, на который нужно отправить TON
                    const recipientAddress = 'UQCQD46_F_nffuYLdvdUY1-YCKoncASqe-T9xpmwjwgkJFVs'; // Замените на ваш адрес TON

                    // Сумма для отправки
                    const amount = '1'; // Укажите количество TON, которое хотите отправить

                    // Создание транзакции
                    const transaction = {
                        to: recipientAddress,
                        amount: amount,
                        sendMode: 'fast', // Выбор режима отправки
                    };

                    // Отправка транзакции
                    await wallet.sendTransaction(transaction);
                    alert('Транзакция подтверждена! Спасибо за вашу помощь!');
                } catch (error) {
                    console.error('Ошибка при подключении TON Space:', error);
                    alert('Ошибка при подключении TON Space. Попробуйте снова.');
                }
            });
        });
    </script>
</body>
</html>
